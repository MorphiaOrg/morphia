* this file is the ultimate source of truth for the critter-maven module.
  * if you should be given a clarification on any of the items below, this file should be updated to reflect that clarification.
  * any updates to this file should offered for review before writing to this file
* consider ~/dev/morphia-dev/critter as a reference implementation for the critter processor and critter source processor classes.
* both mojos should have unit tests and integration tests to verify their functionality.
* both mojos should any existing morphia-config.properties in the resources folder for either src/main or src/test depending on which 
  set of elements is being processed.
  * an example of this file can be found here:  docs/modules/ROOT/examples/complete-morphia-config.properties
  * an explanation of the properties in this file can be found here: core/src/main/java/dev/morphia/config/MorphiaConfig.java
  * the contents of this file should be used to configure the CritterProcessor and CritterSourceProcessor instances used by the mojos.
  * if no such file exists, default configuration should be used.
* logging for these mojos should use sl4j as the logging facade.

## Generate Mojo (`critter:generate`)

* create a maven mojo called named "generate" examines the compiled .class files in the project's output directory as defined in the
  MavenProject passed to the mojo.
  * These classes should be passed to a CritterProcessor class that performs some processing on them.
  * The mojo should be bound to the "process-classes" phase of the Maven build lifecycle.
  * The mojo should be implemented in kotlin and use the Maven Plugin API.
  * The results of the processing should be stored in the target (or the equivalent output directory as defined in the MavenProject) under
    generated-classes/critter
  * The mojo can be configured to optionally process the test classes as well.

### Configuration Parameters

| Parameter | Property | Default | Description |
|-----------|----------|---------|-------------|
| `outputDirectory` | `critter.outputDirectory` | `${project.build.directory}/generated-classes/critter` | Where to write generated class files |
| `packages` | `critter.packages` | (empty) | List of packages to scan. If empty, scans all packages |
| `includeTestClasses` | `critter.includeTestClasses` | `false` | Whether to scan test classes instead of main classes |

### Implementation Notes

* Uses `CritterProcessor` class to process classes
* Uses `CritterGizmoGenerator` from critter-core to generate bytecode
* Uses ClassGraph to scan for @Entity annotated classes
* Generated bytecode is written to the output directory

## Sources Mojo (`critter:sources`)

* create another mojo called "sources" that collects all the source files from the project's source directories and passes them to a
  CritterSourceProcessor class for processing.
  * The mojo should be bound to the "generate-sources" phase of the Maven build lifecycle.
  * The processed source files should be stored in the target/generated-sources/critter directory.
  * The mojo should also be implemented in kotlin and use the Maven Plugin API.
  * this mojo can also be configured to optionally process the test source files as well.
  * this mojo should also add the generated-sources/critter directory to the project's compile source roots so that the generated
    sources are included in the compilation.
  * this mojo should follow the example of the 'generator' module in the critter project.
    * copying those sources here and updating them is acceptable.

### Configuration Parameters

| Parameter | Property | Default | Description |
|-----------|----------|---------|-------------|
| `sourceOutputDirectory` | `critter.sourceOutputDirectory` | `${project.build.directory}/generated-sources/critter` | Where to write generated source files |
| `resourceOutputDirectory` | `critter.resourceOutputDirectory` | `${project.build.directory}/generated-resources/critter` | Where to write generated resource files (e.g., service loaders) |
| `packages` | `critter.packages` | (empty) | List of packages to scan. If empty, scans all packages |
| `includeTestSources` | `critter.includeTestSources` | `false` | Whether to scan test sources instead of main sources |
| `criteriaPackage` | `critter.criteriaPackage` | (null) | Package name for generated criteria classes |
| `format` | `critter.format` | `true` | Whether to format generated source files |

### Implementation Notes

* Uses `CritterSourceProcessor` class to process source files
* Uses Roaster library to parse and manipulate Java source files
* Scans for @Entity annotated source files
* Adds generated sources directory to compile/test source roots automatically
* Reference implementation: `~/dev/morphia-dev/critter/generator` module

## Dependencies

The critter-maven module requires:
* `critter-core` - for bytecode generation (CritterGizmoGenerator, CritterClassLoader)
* `classgraph` - for scanning compiled classes
* `roaster-api` and `roaster-jdt` - for parsing Java source files
* Maven plugin API and annotations
